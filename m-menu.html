<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M-Menu</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">
    <style>
        * {
            box-sizing: border-box;
        }

        main {
            padding: 100px 0 0 0;
        }

        body {
            margin: 0;
            padding: 0;
        }

        ul {
            margin: 0;
            list-style: none;
        }

        .open-m-menu {
            position: absolute;
            top: 30px;
            right: 30px;
            display: block;
            font-size: 20px;
            cursor: pointer;
        }

        .m-menu {
            position: fixed;
            right: -100%;
            top: 0;
            width: 50%;
            height: 100%;
            padding: 30px 0 0 0;
            background: grey;
            transition: all 0.5s ease-in-out;
        }

        .m-menu--active {
            right: 0;
        }

        .m-menu__list {
            text-align: right;
        }

        .m-menu__item {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            border-bottom: 1px solid;
        }

        .m-menu__link {
            display: block;
            padding: 10px 10px 10px 0;
        }

        .m-menu__sublist {
            position: absolute;
            top: 0;
            right: -100%;
            width: 99%;
            height: 100%;
            background-color: #FFF;
            transition: all 0.3s;
        }

        .m-menu__sublist--active {
            right: 0;
        }

        .back {
            padding: 10px;
            cursor: pointer;
        }

        .to-sub {
            display: block;
            margin: 0 auto 0 0;
            padding: 10px;
            border: 1px solid;
            cursor: pointer;
        }
    </style>

</head>

<body>

    <i class="fas fa-bars open-m-menu"></i>
    <main>
        <div>Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis ad laboriosam possimus cupiditate, odit
            ipsam quas odio quisquam ratione necessitatibus id nostrum quasi exercitationem? Architecto ad distinctio
            velit possimus necessitatibus.Quas fuga impedit eligendi nesciunt necessitatibus harum a voluptas molestias
            consequuntur itaque nostrum illo alias, blanditiis nam, fugit odio laudantium excepturi. Quasi, ullam.
            Explicabo possimus amet esse! Doloribus, ratione accusantium!Repellat quod ipsum provident dignissimos
            maiores! Provident, cum vitae consequuntur officiis architecto ipsum voluptatem maiores praesentium totam
            amet recusandae fugit, molestias error. Voluptatem odio quibusdam tenetur dolore libero, provident
            explicabo!Cumque aspernatur aut quos aperiam aliquam. Voluptates dolorum quia unde, optio vero, earum
            molestiae architecto dolores at est alias pariatur magni minus incidunt nihil! Numquam error illum dolores
            quam quisquam!Hic, dolore labore commodi totam fuga dignissimos cum assumenda aut nostrum eius veritatis
            expedita placeat doloremque dolorem. Optio hic doloremque consequuntur praesentium aliquid eum. Sit
            dignissimos exercitationem harum voluptas doloremque!Modi facilis molestiae ea rem amet possimus blanditiis
            dolor exercitationem voluptatum porro iure nulla deserunt, perspiciatis cupiditate ipsam, voluptate tempore.
            Magni, voluptatibus fugit! Molestiae voluptate sequi beatae aliquam fuga cupiditate.At aut saepe aspernatur,
            fugit molestiae minima consectetur nam voluptatum. Minus temporibus quae consequatur fugit, aliquid, et
            libero sapiente vero vitae recusandae consectetur tempora sit ipsa excepturi porro est ducimus?Officia,
            sapiente quo, consequuntur itaque, delectus reiciendis veritatis rerum at optio facilis sequi sit molestiae
            corrupti nostrum est numquam. Nam, cupiditate atque. Repudiandae at iusto assumenda aut repellat eum
            maxime?Dolorem dignissimos quos, nesciunt ea eaque ipsum voluptate officia deleniti assumenda aliquam, ipsa
            nobis totam molestias a veniam quasi distinctio earum natus quibusdam autem similique tempora dolores ad.
            Accusamus, atque!Animi placeat quisquam, et ab dicta a officia fugiat nobis quis! Dolores non quos doloribus
            aut dolorem sed fugit amet delectus qui? Praesentium exercitationem iste quia mollitia, dicta odio aliquam.
        </div>
    </main>
    <div class="m-menu">
        <ul class="m-menu__list m-menu--1level">
            <li class="m-menu__item"><span class="to-sub">+</span><a class="m-menu__link" href="">пункт 1</a>
                <ul class="m-menu__sublist m-menu--2level">
                    <li class="m-menu__item back">Назад</li>
                    <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 1</a></li>
                    <li class="m-menu__item"><span class="to-sub">+</span><a class="m-menu__link" href="">подпункт 2</a>
                        <ul class="m-menu__sublist m-menu--3level">
                            <li class="m-menu__item back">Назад</li>
                            <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 1-10</a></li>
                            <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 2-20</a></li>
                            <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 3-30</a></li>
                        </ul>
                    </li>
                    <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 3</a></li>
                </ul>
            </li>
            <li class="m-menu__item"> <a class="m-menu__link" href="">пункт 2</a></li>
            <li class="m-menu__item"><span class="to-sub">+</span><a class="m-menu__link" href="">пункт 3</a>
                <ul class="m-menu__sublist m-menu--2level">
                    <li class="m-menu__item back">Назад</li>
                    <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 1-1</a></li>
                    <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 2-2</a></li>
                    <li class="m-menu__item"><a class="m-menu__link" href="">подпункт 3-3</a></li>
                </ul>
            </li>
            <li class="m-menu__item"><a class="m-menu__link" href="">пункт 4</a></li>
            <li class="m-menu__item"><a class="m-menu__link" href="">пункт 5</a></li>
        </ul>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            let itemLi = document.querySelectorAll('.m-menu__item');
            let openMenu = document.querySelector('.open-m-menu');
            let mMenu = document.querySelector('.m-menu');

            let toggleMenu = function () {
                mMenu.classList.toggle('m-menu--active');
            }

            openMenu.addEventListener('click', function (e) {
                e.stopPropagation();
                toggleMenu();
            });

            document.addEventListener('click', function (e) {
                let target = e.target;
                let itsMenu = target == mMenu || mMenu.contains(target);
                let itsBtnMenu = target == openMenu;
                let activeMenu = mMenu.classList.contains('m-menu--active');
                if (!itsMenu && !itsBtnMenu && activeMenu) toggleMenu();
            });

            itemLi.forEach(item => {
                let moreBtn = item.querySelector('.to-sub');
                let submenu = item.querySelector('.m-menu__sublist');
                let backMenu = item.querySelector('.back');
                if (moreBtn != null) {
                    moreBtn.addEventListener('click', function () {
                        submenu.classList.add('m-menu__sublist--active');
                    });
                    backMenu.addEventListener('click', function () {
                        submenu.classList.remove('m-menu__sublist--active');
                    });
                }
            });

        });
    </script>

</body>

</html>